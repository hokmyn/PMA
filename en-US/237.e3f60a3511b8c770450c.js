"use strict";(self.webpackChunkapp_name=self.webpackChunkapp_name||[]).push([[237],{8237:(ne,P,i)=>{i.r(P),i.d(P,{AuthModule:()=>ee});var u=i(8583),a=i(4655),t=i(3679),O=i(6782),d=i(7709),e=i(7716),R=i(5257),Z=i(8002),y=i(2872);let p=(()=>{class n{constructor(_){this.http=_}singIn(_){return localStorage.setItem("login",JSON.stringify({login:_.login,id:""})),this.http.post("signin",_)}registration(_){return this.http.post("signup",_)}getUserId(){this.http.get("users").pipe((0,R.q)(1),(0,Z.U)(_=>_.filter(o=>{if(JSON.parse(localStorage.getItem("login")).login===o.login)return o.id}))).subscribe(_=>{const o=JSON.parse(localStorage.getItem("login"));o.id=_[0].id,localStorage.setItem("login",JSON.stringify(o))})}}return n.\u0275fac=function(_){return new(_||n)(e.LFG(y.O))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var S=i(8295),C=i(4039),c=i(1095),f=i(6627);function D(n,r){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,18),e.qZA())}function q(n,r){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,19),e.qZA())}function v(n,r){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,20),e.qZA())}function H(n,r){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,21),e.qZA())}function X(n,r){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,22),e.qZA())}function b(n,r){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,23),e.qZA())}function x(n,r){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,24),e.qZA())}function w(n,r){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,25),e.qZA())}function F(n,r){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,26),e.qZA())}function J(n,r){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,27),e.qZA())}let k=(()=>{class n{constructor(_,o,g){this.fb=_,this.authService=o,this.router=g,this.hide=!0,this.destroy$=new d.xQ}ngOnInit(){this.regForm=this.fb.group({name:this.fb.control("",[t.kI.required,t.kI.minLength(3)]),login:this.fb.control("",[t.kI.required,t.kI.minLength(3)]),pass:this.fb.group({password:this.fb.control("",[t.kI.required,t.kI.minLength(5)]),confirmPassword:this.fb.control("",[t.kI.required,t.kI.minLength(5)])},{validator:this.confirmPassword()})})}registration(){this.regForm.markAsTouched(),this.regForm.valid&&this.authService.registration({name:this.regForm.value.name,password:this.regForm.value.pass.password,login:this.regForm.value.login}).pipe((0,O.R)(this.destroy$)).subscribe(()=>{this.router.navigate(["auth/sign-in"])},o=>{console.log(o),this.regForm.setErrors({conflict:o})})}confirmPassword(){return _=>_.value.password===_.value.confirmPassword?null:{confirmInvalid:!0}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(_){return new(_||n)(e.Y36(t.qu),e.Y36(p),e.Y36(a.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sign-up"]],decls:40,vars:19,consts:function(){let r,_,o,g,N,M,m,T,E,l,I,A,U,h,G,L,$;return r="Registration",_="Name",o="Login",g="Enter your password",N="Confirm your password",M=" Registration ",m="Back",T=" Such a user already exists ",E=" The name field is required ",l=" Minimum length of 5 characters ",I=" The login field is required ",A=" Minimum length of 5 characters ",U=" The password field is required ",h=" Minimum length of 5 characters ",G=" The password field is required ",L=" Minimum length of 5 characters ",$=" Confirm password wrong ",[[1,"container",3,"formGroup","submit"],r,[4,"ngIf"],["appearance","fill"],_,["matInput","","type","text","formControlName","name"],o,["matInput","","type","text","formControlName","login"],["formGroupName","pass"],g,["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],N,["matInput","","formControlName","confirmPassword",3,"type"],["mat-raised-button","","color","warn","type","submit"],M,["routerLink","../sign-in"],m,T,E,l,I,A,U,h,G,L,$]},template:function(_,o){1&_&&(e.TgZ(0,"form",0),e.NdJ("submit",function(){return o.registration()}),e.TgZ(1,"h2"),e.SDv(2,1),e.qZA(),e.YNc(3,D,2,0,"mat-error",2),e.TgZ(4,"mat-form-field",3),e.TgZ(5,"mat-label"),e.SDv(6,4),e.qZA(),e._UZ(7,"input",5),e.YNc(8,q,2,0,"mat-error",2),e.YNc(9,v,2,0,"mat-error",2),e.qZA(),e.TgZ(10,"mat-form-field",3),e.TgZ(11,"mat-label"),e.SDv(12,6),e.qZA(),e._UZ(13,"input",7),e.YNc(14,H,2,0,"mat-error",2),e.YNc(15,X,2,0,"mat-error",2),e.qZA(),e.ynx(16,8),e.TgZ(17,"mat-form-field",3),e.TgZ(18,"mat-label"),e.SDv(19,9),e.qZA(),e._UZ(20,"input",10),e.TgZ(21,"button",11),e.NdJ("click",function(){return o.hide=!o.hide}),e.TgZ(22,"mat-icon"),e._uU(23),e.qZA(),e.qZA(),e.YNc(24,b,2,0,"mat-error",2),e.YNc(25,x,2,0,"mat-error",2),e.qZA(),e.TgZ(26,"mat-form-field",3),e.TgZ(27,"mat-label"),e.SDv(28,12),e.qZA(),e._UZ(29,"input",13),e.TgZ(30,"button",11),e.NdJ("click",function(){return o.hide=!o.hide}),e.TgZ(31,"mat-icon"),e._uU(32),e.qZA(),e.qZA(),e.YNc(33,w,2,0,"mat-error",2),e.YNc(34,F,2,0,"mat-error",2),e.qZA(),e.YNc(35,J,2,0,"mat-error",2),e.BQk(),e.TgZ(36,"button",14),e.SDv(37,15),e.qZA(),e.TgZ(38,"a",16),e.SDv(39,17),e.qZA(),e.qZA()),2&_&&(e.Q6J("formGroup",o.regForm),e.xp6(3),e.Q6J("ngIf",o.regForm.hasError("conflict")),e.xp6(5),e.Q6J("ngIf",o.regForm.controls.name.hasError("required")),e.xp6(1),e.Q6J("ngIf",o.regForm.controls.name.hasError("minlength")),e.xp6(5),e.Q6J("ngIf",o.regForm.controls.login.hasError("required")),e.xp6(1),e.Q6J("ngIf",o.regForm.controls.login.hasError("minlength")),e.xp6(5),e.Q6J("type",o.hide?"password":"text"),e.xp6(1),e.uIk("aria-label","Hide password")("aria-pressed",o.hide),e.xp6(2),e.Oqu(o.hide?"visibility_off":"visibility"),e.xp6(1),e.Q6J("ngIf",o.regForm.get("pass").get("password").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.regForm.get("pass").get("password").hasError("minlength")),e.xp6(4),e.Q6J("type",o.hide?"password":"text"),e.xp6(1),e.uIk("aria-label","Hide password")("aria-pressed",o.hide),e.xp6(2),e.Oqu(o.hide?"visibility_off":"visibility"),e.xp6(1),e.Q6J("ngIf",o.regForm.get("pass").get("confirmPassword").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.regForm.get("pass").get("confirmPassword").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",o.regForm.get("pass").hasError("confirmInvalid")))},directives:[t._Y,t.JL,t.sg,u.O5,S.KE,S.hX,C.Nt,t.Fj,t.JJ,t.u,t.x0,c.lW,S.R9,f.Hw,a.yS,S.TO],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:400px;margin:100px auto 0}.container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;margin:10px auto 0}.example-right-align[_ngcontent-%COMP%]{text-align:right}input.example-right-align[_ngcontent-%COMP%]::-webkit-outer-spin-button, input.example-right-align[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}input.example-right-align[_ngcontent-%COMP%]{-moz-appearance:textfield}"]}),n})();function z(n,r){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&n){const _=e.oxw();e.xp6(1),e.hij(" ",_.loginForm.getError("loginErr")," ")}}function Y(n,r){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,13),e.qZA())}function Q(n,r){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,14),e.qZA())}function B(n,r){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,15),e.qZA())}function j(n,r){1&n&&(e.TgZ(0,"mat-error"),e.SDv(1,16),e.qZA())}const K=[{path:"",redirectTo:"sign-in",pathMatch:"full"},{path:"sign-in",component:(()=>{class n{constructor(_,o,g){this.fb=_,this.authService=o,this.router=g,this.hide=!0,this.destroy$=new d.xQ}ngOnInit(){this.loginForm=this.fb.group({login:this.fb.control("",[t.kI.required,t.kI.minLength(3)]),password:this.fb.control("",[t.kI.required,t.kI.minLength(5)])})}login(){this.loginForm.markAsTouched(),this.loginForm.valid&&this.authService.singIn(this.loginForm.value).pipe((0,O.R)(this.destroy$)).subscribe(_=>{null!=_.token?(localStorage.setItem("access-token",_.token),this.authService.getUserId(),this.router.navigate(["../","main"])):console.log("check your credentials !!")},()=>{this.loginForm.setErrors({loginErr:" User was not founded!"})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(_){return new(_||n)(e.Y36(t.qu),e.Y36(p),e.Y36(a.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sign-in"]],decls:23,vars:10,consts:function(){let r,_,o,g,N,M,m,T,E;return r="Login",_="Login",o="Enter your password",g=" Login ",N="Registration",M=" The login field is required ",m=" Minimum length of 5 characters ",T=" The password field is required ",E=" Minimum length of 5 characters ",[[1,"container",3,"formGroup","submit"],r,[4,"ngIf"],["appearance","fill"],_,["matInput","","type","text","formControlName","login"],o,["matInput","","formControlName","password",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["mat-raised-button","","color","warn","type","submit"],g,["routerLink","../registration"],N,M,m,T,E]},template:function(_,o){1&_&&(e.TgZ(0,"form",0),e.NdJ("submit",function(){return o.login()}),e.TgZ(1,"h2"),e.SDv(2,1),e.qZA(),e.YNc(3,z,2,1,"mat-error",2),e.TgZ(4,"mat-form-field",3),e.TgZ(5,"mat-label"),e.SDv(6,4),e.qZA(),e._UZ(7,"input",5),e.YNc(8,Y,2,0,"mat-error",2),e.YNc(9,Q,2,0,"mat-error",2),e.qZA(),e.TgZ(10,"mat-form-field",3),e.TgZ(11,"mat-label"),e.SDv(12,6),e.qZA(),e._UZ(13,"input",7),e.TgZ(14,"button",8),e.NdJ("click",function(){return o.hide=!o.hide}),e.TgZ(15,"mat-icon"),e._uU(16),e.qZA(),e.qZA(),e.YNc(17,B,2,0,"mat-error",2),e.YNc(18,j,2,0,"mat-error",2),e.qZA(),e.TgZ(19,"button",9),e.SDv(20,10),e.qZA(),e.TgZ(21,"a",11),e.SDv(22,12),e.qZA(),e.qZA()),2&_&&(e.Q6J("formGroup",o.loginForm),e.xp6(3),e.Q6J("ngIf",o.loginForm.hasError("loginErr")),e.xp6(5),e.Q6J("ngIf",o.loginForm.controls.login.hasError("required")),e.xp6(1),e.Q6J("ngIf",o.loginForm.controls.login.hasError("minlength")),e.xp6(4),e.Q6J("type",o.hide?"password":"text"),e.xp6(1),e.uIk("aria-label","Hide password")("aria-pressed",o.hide),e.xp6(2),e.Oqu(o.hide?"visibility_off":"visibility"),e.xp6(1),e.Q6J("ngIf",o.loginForm.controls.password.hasError("required")),e.xp6(1),e.Q6J("ngIf",o.loginForm.controls.password.hasError("minlength")))},directives:[t._Y,t.JL,t.sg,u.O5,S.KE,S.hX,C.Nt,t.Fj,t.JJ,t.u,c.lW,S.R9,f.Hw,a.yS,S.TO],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:400px;margin:150px auto 0}.container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;margin:10px auto 0}.example-right-align[_ngcontent-%COMP%]{text-align:right}input.example-right-align[_ngcontent-%COMP%]::-webkit-outer-spin-button, input.example-right-align[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}input.example-right-align[_ngcontent-%COMP%]{-moz-appearance:textfield}"]}),n})()},{path:"registration",component:k}];let W=(()=>{class n{}return n.\u0275fac=function(_){return new(_||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.Bz.forChild(K)],a.Bz]}),n})();var V=i(5378);let ee=(()=>{class n{}return n.\u0275fac=function(_){return new(_||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[p],imports:[[u.ez,W,V.q,t.UX]]}),n})()}}]);